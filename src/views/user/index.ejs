<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <title>Document</title>
</head>
<body>
    <nav class="navbar navbar-light bg-light">
        <a class="navbar-brand" href="/todo">TodoList</a>
        <div class='text-center'>
            <span class='mx-3'><%= user_name %></span>
            <a class='text-secondary mx-3' href='/logout'>Log out</a>
        </div>
    </nav>
    <div class="container mt-4" role="main">
        <ul class="nav nav-tabs">
            <li class="nav-item">
                <a class="nav-link" href="/todo">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="/todo/add">Add</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="/user">User</a>
            </li>
        </ul>

        <form action="/user/update" method="post" class='mt-5 col-5 mx-auto'>
            <div class='text-danger text-center my-5'>
                <% if(errorMessage !== null){ %>
                    <% for(let i in errorMessage.errors){ %>
                        <p><%= errorMessage.errors[i].message %></p>
                    <% } %>
                <% } %>
            </div>
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" name='name' value='<%= user.name %>'>
            </div>
            <div class="form-group">
                <label for="email">EMAIL</label>
                <input type="text" class="form-control" name='email' value='<%= user.email %>'>
            </div>
            <div class="form-group">
                <label for="age">Age</label>
                <input type="text" class="form-control" name='age' value='<%= user.age %>'>
            </div>
            <div class='text-right'>
                <a class='btn btn-primary m-2' href='/user/changePass'>Change password</a>
                <button type="submit" class="btn btn-info m-2">Update</button>
                <button type="button" class="btn btn-danger m-2" id="delete">Delete</button>
            </div>
        </form>
        <div id='modalContent'>
            <h3 class='text-center m-5'>本当に削除してもよろしいですか？</h3>
            <div class='text-center mx-auto mt-5 d-flex'>
                <div class='mx-auto'>
                    <form action='#' method='post'>
                        <button class='btn btn-danger btn-lg' type='submit'>はい</button>
                    </form>
                </div>
                <div class='mx-auto'>
                    <button class='btn btn-primary btn-lg' id='notDelete'>いいえ</button>
                </div>
            </div>

        </div>
    </div>
    <div id="back"></div>
</body>

    <script>
        'use strict';
        const deleteBtn = document.getElementById('delete');
        const back = document.getElementById('back');
        const modalContent = document.getElementById('modalContent');
        const notDeleteBtn = document.getElementById('notDelete');
        deleteBtn.addEventListener('click', ()=>{
            back.classList.toggle('backBlack');
            modalContent.classList.toggle('modalShow');
            modalContent.style.display = 'block';
        });
        notDeleteBtn.addEventListener('click', ()=>{
            back.classList.toggle('backBlack');
            modalContent.classList.toggle('modalShow');
            modalContent.style.display = 'none';
        })
    </script>
</html>